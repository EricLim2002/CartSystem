/* =========================
   DARK MODE (supports html.dark OR data-bs-theme="dark")
   ========================= */

/* --- Toggle button --- */
#theme-toggle {
  background-color: transparent !important;
  border: none !important;
  padding: 0.25rem 0.5rem;
  font-size: 1.5rem;
  cursor: pointer;
  transition: background-color .25s ease, color .25s ease;
}
#theme-toggle:hover { background-color: rgba(255,255,255,.15); border-radius: 8px; }

/* Aliases for selecting dark mode either way */
:root[data-bs-theme="dark"], html.dark { --_dark: 1; }

/* Page colors driven by theme (light defaults already set in your vars) */
:root[data-bs-theme="light"] {
  --page-bg: var(--main-theme);    /* your purple background */
  --page-fg: var(--text-color);    /* white text */
}
:root[data-bs-theme="dark"],
html.dark {
  --page-bg: #593392;              /* dark backdrop matching brand */
  --page-fg: #ffffff;

  /* brand surfaces swap for dark */
  --main-theme: #593392;
  --secondary-color: #9455f4;
  --text-color: #ffffff;
  --text-color-secondary: #ffffff;

  /* bootstrap body/border for components */
  --bs-body-bg: var(--page-bg);
  --bs-body-color: var(--page-fg);
  --bs-border-color: rgba(255,255,255,.2);
}

/* Apply to body + main content */
html, body { transition: background-color .25s ease, color .25s ease, border-color .25s ease; }
html:not(.dark)[data-bs-theme="light"] body,
html:not([data-bs-theme="dark"]):not(.dark) body { /* light */
  background-color: var(--page-bg) !important;
  color: var(--page-fg) !important;
}
:root[data-bs-theme="dark"] body,
html.dark body {
  background-color: var(--page-bg) !important;
  color: var(--page-fg) !important;
}

/* Header / footer / nav surfaces */
header, footer, .navbar, .general-color, .offcanvas, .dropdown-menu {
  transition: background-color .25s ease, color .25s ease, border-color .25s ease;
}
:root[data-bs-theme="dark"] header,
:root[data-bs-theme="dark"] footer,
:root[data-bs-theme="dark"] .general-color,
:root[data-bs-theme="dark"] .navbar,
:root[data-bs-theme="dark"] .offcanvas,
:root[data-bs-theme="dark"] .dropdown-menu,
html.dark header,
html.dark footer,
html.dark .general-color,
html.dark .navbar,
html.dark .offcanvas,
html.dark .dropdown-menu {
  background-color: var(--secondary-color) !important;
  color: var(--text-color) !important;
}

/* Links & items */
:root[data-bs-theme="dark"] a,
:root[data-bs-theme="dark"] .nav-link,
:root[data-bs-theme="dark"] .dropdown-item,
html.dark a,
html.dark .nav-link,
html.dark .dropdown-item { color: var(--text-color) !important; }

:root[data-bs-theme="dark"] .dropdown-item:hover,
:root[data-bs-theme="dark"] .dropdown-item.active,
html.dark .dropdown-item:hover,
html.dark .dropdown-item.active {
  background-color: #7d47d4 !important;
  color: #fff !important;
}

/* Cards / lists / tables / modals → follow body vars */
.card,
.list-group-item,
.dropdown-menu,
.offcanvas,
.modal-content,
.accordion-item,
.toast,
.table {
  background-color: var(--bs-body-bg) !important;
  color: var(--bs-body-color) !important;
}

/* Scroll hint & image borders */
:root[data-bs-theme="dark"] .scroll-hint,
html.dark .scroll-hint {
  background: rgba(255,255,255,.15);
  color: #fff;
}
:root[data-bs-theme="dark"] .scrollable-image,
:root[data-bs-theme="dark"] .scrollable-image-xl,
:root[data-bs-theme="dark"] .scrollable-image-s,
html.dark .scrollable-image { border: 1px solid var(--secondary-color); }

/* Theme toggle color in dark */
:root[data-bs-theme="dark"] #theme-toggle,
html.dark #theme-toggle { color: #fff; }
:root[data-bs-theme="dark"] #theme-toggle:hover,
html.dark #theme-toggle:hover { background-color: rgba(0,0,0,.15); }

/* Offcanvas backdrop (dim) */
.offcanvas-backdrop { transition: background-color .3s ease, opacity .3s ease; }
html:not(.dark)[data-bs-theme="light"] .offcanvas-backdrop.show,
html:not([data-bs-theme]) .offcanvas-backdrop.show { background-color: rgba(0,0,0,.2); }
:root[data-bs-theme="dark"] .offcanvas-backdrop.show,
html.dark .offcanvas-backdrop.show { background-color: rgba(255,255,255,.1); }

/* Borders in dark header/footer */
:root[data-bs-theme="dark"] .border-bottom,
html.dark .border-bottom { border-color: rgba(255,255,255,.2) !important; }

/* =========================
   RESPONSIVE ADJUSTMENTS
   ========================= */
@media (max-width: 992px) {
  :root[data-bs-theme="dark"] .navbar a,
  html.dark .navbar a { font-size: 16px; }

  :root[data-bs-theme="dark"] .scrollable-text,
  :root[data-bs-theme="dark"] .scrollable-image,
  html.dark .scrollable-text,
  html.dark .scrollable-image { max-height: 400px; }
}

@media (max-width: 576px) {
  :root[data-bs-theme="dark"] h1, html.dark h1 { font-size: 1.8rem; }
  :root[data-bs-theme="dark"] h2, html.dark h2 { font-size: 1.3rem; }
  :root[data-bs-theme="dark"] .scrollable-text,
  html.dark .scrollable-text { font-size: .95rem; }
}

/* =========================
   OPTIONAL: follow system preference by default
   (only if you want automatic dark without user toggle)
   ========================= */
@media (prefers-color-scheme: dark) {
  :root:not([data-bs-theme]) { /* only when you’re not explicitly setting it */
    --page-bg: #593392;
    --page-fg: #ffffff;
  }
}

:root[data-bs-theme="dark"] .no-shadow {
    text-shadow: 2px 2px 4px rgba(73, 73, 73, 0.4) !important;
}

/* Dark mode hover */
:root[data-bs-theme="dark"] a:hover {
    color: var(--secondary-color) !important; /* different hover color for dark mode */
}

[data-bs-theme="dark"] {
    --bs-primary: var(--main-theme);
    --bs-primary-rgb: 148, 85, 244;
    --bs-body-color: var(--text-color);
    --bs-body-bg: #121212; /* Dark mode background */
}

:root[data-bs-theme="dark"] .accordion-button:hover,
:root[data-bs-theme="dark"].accordion-button:focus {
    color: var(--main-theme) !important;
}
:root[data-bs-theme="dark"] .accordion-body ul li a {
    color: var(--main-theme);
}

:root[data-bs-theme="dark"] .accordion-button:not(.collapsed) {
    background: var(--secondary-color) !important;
    color: var(--main-theme);
    /* highlight when open */
}